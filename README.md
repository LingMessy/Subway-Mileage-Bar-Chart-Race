# Python数据分析期末作业及要求

# 作业内容

使用Python及第三方包，实现如subway.mp4所示效果，相关步骤提示如下：

###  1.数据组织和预处理

请以“国家地铁里程历程.csv”为基础，进行数据预处理，方式是：

1. 每一列最前面的正整数之前全部设为0。

2. 每一列空格部分都使用前后两个值进行“线性插值”填空，但是插值一定不是以年为单位进行，详见第（2）点。插值过程示例：

![image1](README.assets/image1.png)



### 2.使用处理完成后的数据，绘制N幅横向的柱状图（plt.barh）

要求：

1. 绘图的起止年份为1900年和2021年。

2. N等于多少呢？设视频总时长为2分钟，帧频为12幅每秒，则总图片数为2\*60\*12=1440幅。即每年1440/121，约为12幅，因此在任务1中，请以月为单位进行插值。

3. 每幅图的大小自定义。

4. 每幅图显示里程数最多的10个国家，当不到10个时，全部绘制。

5. 绘图时里程数大的在上放，小的在下方。

6. 每个国家对应的颜色自行定义，且保持不变，其中中国须为红色。

7. 图中每条bar须列明国名，可以在bar内部的右侧（如视频所示效果），也可以在bar外部的左侧（即视频中国旗所在位置）。

8. 图中每条bar须标注数值，数值保留小数点后2位有效数字，列于bar之外的右侧（如视频所示效果）。



### 3.使用工具包将多幅图片组织为mp4格式视频，帧率设置为每秒12帧。

1. 须在视频上标注水印样式的学号+姓名。
2. 视频中须呈现年份（每5年切变1次）。
3. 除以上规定内容外，鼓励在视频中添加增加感染效果的元素。
4. 除以上规定内容外，鼓励在视频中添加bgm。
5. 将多幅图像组合成视频的方案可参考网络，也可参考如下代码。


```python
import cv2 \#须先执行安装pip install opencv-python

size = (432,288) \#按照图像的实际大小配置

videowrite = cv2.VideoWriter('test.mp4',-1,12, size) \#12表示帧率

mg_array = \[\]

for filename in \[r'pic\\{0}.png'.format(i) for i in range(100)\]:

img = cv2.imread(filename)

if img is None:

print(filename + "is not found.")

continue

img_array.append(img)

for i in range(100):

videowrite.write(img_array\[i\])

videowrite.release()

print('over')
```

